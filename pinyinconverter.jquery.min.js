(function(e){e.fn.PinyinConverter=function(t,n){function o(e){e=e.replace(/\s{2,}/g," ");e=e.replace(/^\s+|\s+$/g,"");if(e.match(/\s/)){console.log("Multiple terms detected.");return e.split(" ")}else{console.log("One term detected.");return e}}function u(e){console.log("Matching '"+e+"'...");var t=["","",""],n,r;for(n in s){if(s.hasOwnProperty(n)){r=s[n];if(e.match(r)){console.log("Term matched with ending '"+n+"'.");var i=e.match(/1|2|3|4/);if(i&&e.indexOf(i)+1<e.length){e=e.substring(0,e.indexOf(Number(i))+1)}t=e.split(n);t.push(n)}}}if(t[0]===""&&t[1]===""&&t[2]===""){console.log("No matches.")}return t}function a(e,t){if(t!==""&&e!==""){console.log("Reconstructing ending '"+e+"' with Tone "+t+"...");var n,r,i;if(e.match(/.*a(?![aeiouü])/)){n=f("a"+t);r=e.split("a");i=r[0]+n+r[1]}else if(e.match(/.*ai(?![aeiouü])/)){n=f("a"+t);r=e.split("a");i=r[0]+n+r[1]}else if(e.match(/.*ao(?![aeiouü])/)){n=f("a"+t);r=e.split("a");i=r[0]+n+r[1]}else if(e.match(/.*e(?![aeiouü])/)){n=f("e"+t);r=e.split("e");i=r[0]+n+r[1]}else if(e.match(/.*ei(?![aeiouü])/)){n=f("e"+t);r=e.split("e");i=r[0]+n+r[1]}else if(e.match(/.*i(?![aeiouü])/)){n=f("i"+t);r=e.split("i");i=r[0]+n+r[1]}else if(e.match(/.*ia(?![aeiouü])/)){n=f("a"+t);r=e.split("a");i=r[0]+n+r[1]}else if(e.match(/.*iao(?![aeiouü])/)){n=f("a"+t);r=e.split("a");i=r[0]+n+r[1]}else if(e.match(/.*ie(?![aeiouü])/)){n=f("e"+t);r=e.split("e");i=r[0]+n+r[1]}else if(e.match(/.*io(?![aeiouü])/)){n=f("o"+t);r=e.split("o");i=r[0]+n+r[1]}else if(e.match(/.*iu(?![aeiouü])/)){n=f("u"+t);r=e.split("u");i=r[0]+n+r[1]}else if(e.match(/.*o(?![aeiouü])/)){n=f("o"+t);r=e.split("o");i=r[0]+n+r[1]}else if(e.match(/.*ou(?![aeiouü])/)){n=f("o"+t);r=e.split("o");i=r[0]+n+r[1]}else if(e.match(/.*u(?![aeiouü])/)){n=f("u"+t);r=e.split("u");i=r[0]+n+r[1]}else if(e.match(/.*ua(?![aeiouü])/)){n=f("a"+t);r=e.split("a");i=r[0]+n+r[1]}else if(e.match(/.*uai(?![aeiouü])/)){n=f("a"+t);r=e.split("a");i=r[0]+n+r[1]}else if(e.match(/.*ue(?![aeiouü])/)){n=f("e"+t);r=e.split("e");i=r[0]+n+r[1]}else if(e.match(/.*ui(?![aeiouü])/)){n=f("i"+t);r=e.split("i");i=r[0]+n+r[1]}else if(e.match(/.*uo(?![aeiouü])/)){n=f("o"+t);r=e.split("o");i=r[0]+n+r[1]}else if(e.match(/.*v(?![aeiouü])/)){n=f("v"+t);r=e.split("v");i=r[0]+n+r[1]}else if(e.match(/.*ü(?![aeiouü])/)){n=f("ü"+t);r=e.split("ü");i=r[0]+n+r[1]}console.log("Created ending '"+i+"'.")}else{i=e;console.log("Didn't create a new ending.")}return i}function f(e){var t;switch(e){case"a1":t="ā";break;case"a2":t="á";break;case"a3":t="ǎ";break;case"a4":t="à";break;case"e1":t="ē";break;case"e2":t="é";break;case"e3":t="ě";break;case"e4":t="è";break;case"i1":t="ī";break;case"i2":t="í";break;case"i3":t="ǐ";break;case"i4":t="ì";break;case"o1":t="ō";break;case"o2":t="ó";break;case"o3":t="ǒ";break;case"o4":t="ò";break;case"u1":t="ū";break;case"u2":t="ú";break;case"u3":t="ǔ";break;case"u4":t="ù";break;case"v1":t="ǖ";break;case"v2":t="ǘ";break;case"v3":t="ǚ";break;case"v4":t="ǜ";break;case"ü1":t="ǖ";break;case"ü2":t="ǘ";break;case"ü3":t="ǚ";break;case"ü4":t="ǜ";break}return t}function c(){if(l.val()!==""){var e=l.val();l.val("");var t=o(e);if(typeof t!=="string"){var r,i,s,f,c;for(f in t){if(t.hasOwnProperty(f)){c=t[f];r=u(c);i=a(r[2],r[1]);s=r[0]+i;if(r[1]!==""){if(l.val()!==""){l.val(l.val()+" "+s)}else{l.val(s)}}else{if(l.val()!==""){l.val(l.val()+" "+c)}else{l.val(c)}}}}}else{r=u(e);i=a(r[2],r[1]);s=r[0]+i;if(s!==""){l.val(s)}else{l.val(e)}}if(n.focusAfterConvert===true){l.focus()}}}if(typeof n==="undefined"){var n={focusAfterConvert:true,consoleMessages:true,realtimeConvert:false}}else{if(typeof n.focusAfterConvert==="undefined"){n.focusAfterConvert=true}if(typeof n.consoleMessages==="undefined"){n.consoleMessages=true}if(typeof n.realtimeConvert==="undefined"){n.realtimeConvert=false}}var r=console.log;console.log=function(){if(n.consoleMessages===true){r.apply(this,arguments)}};var i=[49,50,51,52];var s={a:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*a(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*a$|^a(?=[1-4](?!\w))/,ai:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*ai(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*ai$|^ai(?=[1-4](?!\w))/,an:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*an(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*an$|^an(?=[1-4](?!\w))/,ang:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*ang(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*ang$|^ang(?=[1-4](?!\w))/,ao:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*ao(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*ao$|^ao(?=[1-4](?!\w))/,e:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*e(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*e$|^e(?=[1-4](?!\w))/,ei:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*ei(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*ei$|^ei(?=[1-4](?!\w))/,en:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*en(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*en$|^en(?=[1-4](?!\w))/,eng:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*eng(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*eng$|^eng(?=[1-4](?!\w))/,er:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*er(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*er$|^er(?=[1-4](?!\w))/,i:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*i(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*i$|^i(?=[1-4](?!\w))/,ia:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*ia(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*ia$|^ia(?=[1-4](?!\w))/,ian:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*ian(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*ian$|^ian(?=[1-4](?!\w))/,iang:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*iang(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*iang$|^iang(?=[1-4](?!\w))/,iao:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*iao(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*iao$|^iao(?=[1-4](?!\w))/,ie:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*ie(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*ie$|^ie(?=[1-4](?!\w))/,"in":/[bcdfghjklmnpqrstwxyz][^aeiouüv]*in(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*in$|^in(?=[1-4](?!\w))/,ing:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*ing(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*ing$|^ing(?=[1-4](?!\w))/,io:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*io(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*io$|^io(?=[1-4](?!\w))/,iong:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*iong(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*iong$|^iong(?=[1-4](?!\w))/,iu:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*iu(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*iu$|^iu(?=[1-4](?!\w))/,o:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*o(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*o$|^o(?=[1-4](?!\w))/,ong:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*ong(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*ong$|^ong(?=[1-4](?!\w))/,ou:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*ou(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*ou$|^ou(?=[1-4](?!\w))/,u:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*u(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*u$|^u(?=[1-4](?!\w))/,ua:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*ua(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*ua$|^ua(?=[1-4](?!\w))/,uai:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*uai(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*uai$|^uai(?=[1-4](?!\w))/,uan:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*uan(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*uan$|^uan(?=[1-4](?!\w))/,uang:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*uang(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*uang$|^uang(?=[1-4](?!\w))/,ue:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*ue(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*ue$|^ue(?=[1-4](?!\w))/,ui:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*ui(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*ui$|^ui(?=[1-4](?!\w))/,un:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*un(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*un$|^un(?=[1-4](?!\w))/,uo:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*uo(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*uo$|^uo(?=[1-4](?!\w))/,v:/[bcdfghjklmnpqrstwxyz][^aeiouüv]*v(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*v$|^v(?=[1-4](?!\w))/,"ü":/[bcdfghjklmnpqrstwxyz][^aeiouüv]*ü(?=[1-4](?!\w))|[bcdfghjklmnpqrstwxyz][^aeiouüv]*ü$|^ü(?=[1-4](?!\w))/};var l=this;if(n.realtimeConvert!==true){t.on("click",function(){c()})}else if(n.realtimeConvert===true){l.on("keyup",function(t){var n=t.which;if(e.inArray(n,i)!==-1){c()}})}}})(jQuery)
